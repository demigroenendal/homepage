<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Demi Groenendal | Portfolio</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
@keyframes colorLoop {
    0%,100%{background-color:#000;color:#fff;}
    50%{background-color:#fff;color:#000;}
}
html,body{
    margin:0;width:100%;height:100%;
    font-family:'Montserrat',sans-serif;
    animation:colorLoop 10s infinite ease-in-out;
    scroll-behavior:smooth;overflow-x:hidden;
}
#bgLogo{
    position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
    font-size:clamp(150px,40vw,600px);opacity:0.05;z-index:0;
    pointer-events:none;font-weight:700;color:inherit;
    font-family:Georgia,'Times New Roman',Times,serif;
}
#particleCanvas{
    position:fixed;top:0;left:0;width:100%;height:100%;
    z-index:100;display:none;background:#000 !important;cursor:move;
}
#particleCanvas.active{display:block;}
#closeBtn{
    position:fixed;top:30px;right:30px;width:50px;height:50px;
    background:rgba(255,255,255,0.1);border:1px solid #fff;color:#fff;
    border-radius:50%;display:none;justify-content:center;align-items:center;
    cursor:pointer;z-index:110;backdrop-filter:blur(5px);
}
section{
    min-height:100vh;display:flex;flex-direction:column;
    justify-content:center;align-items:center;position:relative;z-index:10;
}
#name{
    font-size:clamp(30px,7vw,60px);
    letter-spacing:10px;font-weight:700;text-transform:uppercase;
    margin:0;text-align:center;
}
#sub{font-size:14px;opacity:0.6;letter-spacing:10px;margin:20px 0 40px;}
.btn-main{
    font-size:14px;letter-spacing:4px;padding:15px 40px;
    border:1px solid currentColor;color:inherit;text-decoration:none;transition:0.3s;
}
.btn-main:hover{background:#fff;color:#000;}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;max-width:900px;width:90%;}
.item{
    height:120px;border:1px solid rgba(128,128,128,0.2);
    display:flex;justify-content:center;align-items:center;
    cursor:pointer;transition:0.3s;font-size:12px;letter-spacing:3px;color:inherit;
}
.item:hover{background:currentColor;color:initial;border-color:transparent;}
#contact{padding:100px 0;}
.contact-links{display:flex;flex-direction:column;gap:25px;text-align:center;}
.big-link{
    font-size:clamp(18px,4vw,32px);color:inherit;text-decoration:none;opacity:0.5;
    transition:0.4s;letter-spacing:3px;
}
.big-link:hover{opacity:1;letter-spacing:7px;}
@media(max-width:600px){.grid{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div id="bgLogo">DG</div>
<div id="closeBtn">✕</div>
<canvas id="particleCanvas"></canvas>

<section id="home">
    <div id="name">Demi Groenendal</div>
    <div id="sub">PORTFOLIO</div>
    <a href="#exercises" class="btn-main">EXPLORE</a>
</section>

<section id="exercises">
    <div class="grid">
        <div class="item">PROJECT 01</div>
        <div class="item" id="btnEx2">PROJECT 02</div>
        <div class="item">PROJECT 03</div>
        <div class="item">PROJECT 04</div>
    </div>
</section>

<section id="contact">
    <div id="sub" style="margin-bottom:20px;">CONTACT</div>
    <div class="contact-links">
        <a href="mailto:demigroenendal@gmail.com" class="big-link">demigroenendal@gmail.com</a>
        <a href="https://www.instagram.com/dg.photo.graphy_" target="_blank" class="big-link">@DG.PHOTO.GRAPHY_</a>
    </div>
</section>

<script>
const canvas = document.getElementById('particleCanvas');
const ctx = canvas.getContext('2d');
const closeBtn = document.getElementById('closeBtn');
const btnEx2 = document.getElementById('btnEx2');

let particles=[];
let rotation={x:0,y:0};
let targetRotation={x:0,y:0};
let zoom=850;
let isDragging=false;
let lastPos={x:0,y:0};
let isExploded=false;

function resize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
window.addEventListener('resize',resize);
resize();

class VectorLine3D {
    constructor(x,y,z,bright){
        this.destX=x; this.destY=y; this.destZ=z;
        this.x=(Math.random()-0.5)*canvas.width*5;
        this.y=(Math.random()-0.5)*canvas.height*5;
        this.z=(Math.random()-0.5)*6000;
        this.vx=0; this.vy=0; this.vz=0;
        this.bright=bright;
    }
    update(){
        if(!isExploded){
            this.vx+=(this.destX-this.x)*0.08;
            this.vy+=(this.destY-this.y)*0.08;
            this.vz+=(this.destZ-this.z)*0.08;
        }
        this.vx*=0.86; this.vy*=0.86; this.vz*=0.86;
        this.x+=this.vx; this.y+=this.vy; this.z+=this.vz;
    }
    explode(){
        const force=400; // Dispersione ancora più ampia
        this.vx=(Math.random()-0.5)*force;
        this.vy=(Math.random()-0.5)*force;
        this.vz=(Math.random()-0.5)*force;
    }
    draw(){
        let y1=this.y*Math.cos(rotation.x)-this.z*Math.sin(rotation.x);
        let z1=this.y*Math.sin(rotation.x)+this.z*Math.cos(rotation.x);
        let xFinal=this.x*Math.cos(rotation.y)+z1*Math.sin(rotation.y);
        let zFinal=-this.x*Math.sin(rotation.y)+z1*Math.cos(rotation.y);

        let sc=1000/(zFinal+zoom);
        
        if(sc > 0){
            const opacity=Math.min(1,(this.bright/255)+0.5);
            ctx.strokeStyle=`rgba(255,255,255,${opacity})`;
            ctx.lineWidth=0.7 * sc;
            
            ctx.beginPath();
            ctx.moveTo(xFinal*sc+canvas.width/2, y1*sc+canvas.height/2);
            
            // Lunghezza dinamica: corta a riposo (nitidezza), lunga in volo (effetto vettore)
            let trailX = isExploded ? this.vx * 3 : 1;
            let trailY = isExploded ? this.vy * 3 : 1;
            
            ctx.lineTo(
                (xFinal + trailX)*sc+canvas.width/2, 
                (y1 + trailY)*sc+canvas.height/2
            );
            ctx.stroke();
        }
    }
}

const img=new Image();
img.src='ritratto.png';
img.crossOrigin="Anonymous";
img.onload=()=>{
    const tCanvas=document.createElement('canvas');
    const tCtx=tCanvas.getContext('2d');
    const resSize=400;
    tCanvas.width=resSize; tCanvas.height=resSize;
    tCtx.drawImage(img,0,0,resSize,resSize);
    const data=tCtx.getImageData(0,0,resSize,resSize).data;

    const molt = window.innerWidth < 600 ? 1.6 : 3.2; 

    particles=[];
    for(let y=0;y<resSize;y+=3.5){ 
        for(let x=0;x<resSize;x+=3.5){
            const i=(Math.floor(y)*resSize+Math.floor(x))*4;
            if(data[i+3]>128){
                let zPos=(data[i]-128)*0.6;
                particles.push(new VectorLine3D((x-resSize/2)*molt,(y-resSize/2)*molt,zPos,data[i]));
            }
        }
    }
};

function animate(){
    if(!canvas.classList.contains('active')) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    
    rotation.x+=(targetRotation.x-rotation.x)*0.1;
    rotation.y+=(targetRotation.y-rotation.y)*0.1;
    
    particles.forEach(p=>{
        p.update();
        p.draw();
    });
    requestAnimationFrame(animate);
}

// Rotazione 360 e Touch support
const startAction = (x,y) => { isDragging=true; lastPos={x,y}; };
const moveAction = (x,y) => {
    if(isDragging){
        targetRotation.y+=(x-lastPos.x)*0.012;
        targetRotation.x+=(y-lastPos.y)*0.012;
        lastPos={x,y};
    }
};

canvas.onmousedown=(e)=>startAction(e.clientX, e.clientY);
canvas.ontouchstart=(e)=>startAction(e.touches[0].clientX, e.touches[0].clientY);

window.onmousemove=(e)=>moveAction(e.clientX, e.clientY);
window.ontouchmove=(e)=>{
    moveAction(e.touches[0].clientX, e.touches[0].clientY);
    if(canvas.classList.contains('active')) e.preventDefault();
};

window.onmouseup=window.ontouchend=()=>isDragging=false;

// Esplosione / Ricomposizione
canvas.onclick=()=>{
    isExploded=!isExploded;
    if(isExploded) particles.forEach(p=>p.explode());
};

// Zoom (entrata nell'immagine)
window.onwheel=(e)=>{
    if(canvas.classList.contains('active')){
        zoom += e.deltaY * 0.8;
        if(zoom < 20) zoom = 20; 
    }
};

btnEx2.onclick=()=>{
    canvas.classList.add('active');
    closeBtn.style.display='flex';
    isExploded = false;
    animate();
};

closeBtn.onclick=()=>{
    canvas.classList.remove('active');
    closeBtn.style.display='none';
};
</script>
</body>
</html>



